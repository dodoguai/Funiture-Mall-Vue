(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed5c9612"],{"159b":function(e,t,a){var r=a("da84"),o=a("fdbc"),n=a("17c2"),l=a("9112");for(var s in o){var i=r[s],c=i&&i.prototype;if(c&&c.forEach!==n)try{l(c,"forEach",n)}catch(u){c.forEach=n}}},"17c2":function(e,t,a){"use strict";var r=a("b727").forEach,o=a("a640"),n=o("forEach");e.exports=n?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"65f0":function(e,t,a){var r=a("861d"),o=a("e8b5"),n=a("b622"),l=n("species");e.exports=function(e,t){var a;return o(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!o(a.prototype)?r(a)&&(a=a[l],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},a640:function(e,t,a){"use strict";var r=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&r((function(){a.call(null,t||function(){throw 1},1)}))}},ad99:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"box-card"},[e._m(0),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.changetag(1)}}},[e._v("添加")])],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:0==e.tag,expression:"tag == 0"}],staticStyle:{width:"100%"},attrs:{data:e.tablelist,"header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}}},[a("el-table-column",{attrs:{type:"index",label:"编号"}}),a("el-table-column",{attrs:{label:"分类名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"级别",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.level?a("span",{staticStyle:{"margin-left":"10px"}},[e._v("一级分类")]):e._e(),1==t.row.level?a("span",{staticStyle:{"margin-left":"10px"}},[e._v("二级分类")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"商品数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.productCount))])],1)])]}}])}),a("el-table-column",{attrs:{label:"导航栏",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.row.navStatus,callback:function(a){e.$set(t.row,"navStatus",a)},expression:"scope.row.navStatus"}})]}}])}),a("el-table-column",{attrs:{label:"排序",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.sort))])]}}])}),a("el-table-column",{attrs:{label:"设置"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.level?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.viewafter(t.row.id)}}},[e._v("查看下级")]):e._e(),1==t.row.level?a("el-button",{attrs:{size:"mini",disabled:""}},[e._v("查看下级")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row.id)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handledelete(t.row.id)}}},[e._v("删除")])]}}])})],1),1==e.tag?a("div",{staticClass:"createnew"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"分类名称",required:"",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"分类图标",required:"",prop:"icon"}},[a("el-input",{model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}})],1),a("el-form-item",{attrs:{label:"上级分类"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}},e._l(e.categorylevel1,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{label:"是否显示在导航栏"}},[a("el-radio-group",{model:{value:e.form.navStatus,callback:function(t){e.$set(e.form,"navStatus",t)},expression:"form.navStatus"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onsubmit("form")}}},[e._v("立即创建")]),a("el-button",[e._v("取消")])],1)],1)],1):e._e(),2==e.tag?a("div",{staticClass:"updatenew"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"分类名称",required:"",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"分类图标",required:"",prop:"icon"}},[a("el-input",{model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}})],1),a("el-form-item",{attrs:{label:"上级分类"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}},e._l(e.categorylevel1,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{label:"是否显示在导航栏"}},[a("el-radio-group",{model:{value:e.form.navStatus,callback:function(t){e.$set(e.form,"navStatus",t)},expression:"form.navStatus"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onupdate("form")}}},[e._v("立即更新")]),a("el-button",{on:{click:function(t){return e.changetag(0)}}},[e._v("取消")])],1)],1)],1):e._e(),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:100},on:{"current-change":e.handlechange}})],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"el-icon-tickets"}),e._v(" "),a("span",[e._v("数据列表")])])}],n=(a("159b"),a("b64b"),a("b0c0"),{data:function(){return{tablelist:[],pageindex:1,pagesize:3,tag:0,productinfo:"",categorylevel1:[],form:{id:"",name:"",icon:"",keywords:"",navStatus:1,parentId:"",sort:0},rules:{name:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],icon:[{required:!0,message:"请输入图片url",trigger:"blur"}]}}},created:function(){this.getproductCategory(0,3)},components:{},computed:{},methods:{viewafter:function(e){var t=this;this.$axios({method:"get",url:"/business/admin/productCategory/list/get-children/"+e,data:{}}).then((function(e){console.log(e),t.tablelist=e.data.content.children,console.log(e.data.content.children)}))},handlechange:function(e){console.log(e),this.getproductCategory(e,this.pagesize)},handleEdit:function(e){var t=this;this.form.id=e,this.changetag(2),this.$axios({method:"get",url:"/business/admin/productCategory/getCategoryById/"+e,data:{}}).then((function(e){t.productinfo=e.data.content,console.log(t.productinfo),Object.keys(t.form).forEach((function(e){t.form[e]=t.productinfo[e]}))}))},changetag:function(e){var t=this;this.tag=e,this.$axios({method:"get",url:"/business/admin/productCategory/list/withChildren",data:{}}).then((function(e){console.log(e),t.categorylevel1=e.data.content}))},getproductCategory:function(e,t){var a=this,r={page:e,size:t};this.$axios({method:"post",url:"/business/admin/productCategory/list",data:r}).then((function(e){a.tablelist=e.data.content.list}))},handledelete:function(e){var t=this;this.$confirm("此操作将永久删除该商品分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios({method:"delete",url:"/business/admin/productCategory/delete/"+e,data:{}}).then((function(e){console.log(e),t.$message({type:"success",message:"删除成功!"}),t.getproductCategory(0,10)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},onsubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return alert("输入有错，请检查"),!1;var a={name:t.form.name,icon:t.form.icon,keywords:t.form.keywords,parentId:t.form.parentId,navStatus:t.form.navStatus,level:0,productCount:0,sort:t.form.sort,id:""};console.log(a),t.$axios({method:"post",url:"/business/admin/productCategory/create",data:a}).then((function(e){console.log(e),200==e.data.code?t.$message({type:"success",message:"创建成功"}):t.$message({type:"info",message:e.data.message})}))}))},onupdate:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return alert("输入有错，请检查"),!1;var a={name:t.form.name,icon:t.form.icon,keywords:t.form.keywords,parentId:t.form.parentId,navStatus:t.form.navStatus,level:0,productCount:0,sort:t.form.sort,id:t.form.id};console.log(a),t.$axios({method:"post",url:"/business/admin/productCategory/update",data:a}).then((function(e){console.log(e),200==e.data.code?(t.$message({type:"success",message:"更新成功"}),t.getproductCategory(0,10)):t.$message({type:"info",message:e.data.message})}))})),this.changetag(0)}}}),l=n,s=(a("dda2"),a("2877")),i=Object(s["a"])(l,r,o,!1,null,"400344ce",null);t["default"]=i.exports},b0c0:function(e,t,a){var r=a("83ab"),o=a("9bf2").f,n=Function.prototype,l=n.toString,s=/^\s*function ([^ (]*)/,i="name";r&&!(i in n)&&o(n,i,{configurable:!0,get:function(){try{return l.call(this).match(s)[1]}catch(e){return""}}})},b64b:function(e,t,a){var r=a("23e7"),o=a("7b0b"),n=a("df75"),l=a("d039"),s=l((function(){n(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(e){return n(o(e))}})},b727:function(e,t,a){var r=a("0366"),o=a("44ad"),n=a("7b0b"),l=a("50c4"),s=a("65f0"),i=[].push,c=function(e){var t=1==e,a=2==e,c=3==e,u=4==e,f=6==e,d=7==e,m=5==e||f;return function(p,v,b,g){for(var h,y,w=n(p),k=o(w),x=r(v,b,3),_=l(k.length),$=0,S=g||s,C=t?S(p,_):a||d?S(p,0):void 0;_>$;$++)if((m||$ in k)&&(h=k[$],y=x(h,$,w),e))if(t)C[$]=y;else if(y)switch(e){case 3:return!0;case 5:return h;case 6:return $;case 2:i.call(C,h)}else switch(e){case 4:return!1;case 7:i.call(C,h)}return f?-1:c||u?u:C}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},c0d6:function(e,t,a){},dda2:function(e,t,a){"use strict";a("c0d6")},e8b5:function(e,t,a){var r=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}}}]);
//# sourceMappingURL=chunk-ed5c9612.dd98dedf.js.map